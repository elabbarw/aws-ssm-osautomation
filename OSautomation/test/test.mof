Configuration Genesis
{

    $testvalue = (Get-SSMParameterValue -Name TESTDCPWD).Parameters[0].Value

    ### Import the necessary modules
    Import-DscResource -Module PsDesiredStateConfiguration
    Import-DscResource -ModuleName ComputerManagementDsc -ModuleVersion 8.5.0

    Node localhost
    {
        ### Join the domain with the name taken from the Name tag and set the description of the VM to match the Purpose tag
        Computer Rename {
            Name = '{tag:Name}'
            Description = '{tag:Purpose}'
        }
        ### Set system locale
        SystemLocale SetLocale {
            IsSingleInstance = 'Yes'
            SystemLocale     = 'en-GB'
        }


        ### Test grabbing params

        Script ScriptExample
        {
            SetScript = {
                $sw = New-Object System.IO.StreamWriter("C:\TempFolder\TestFile.txt")
                $sw.WriteLine("Some sample string - $testvalue")
                $sw.Close()
            }
            TestScript = { Test-Path "C:\TempFolder\TestFile.txt" }
            GetScript = { @{ Result = (Get-Content C:\TempFolder\TestFile.txt) } }
        }



    }


}